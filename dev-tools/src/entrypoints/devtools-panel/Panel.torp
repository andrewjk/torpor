export default function Panel($props) {
	@render {
		<p>
			<button onclick={$props.data.reload}>Refresh</button>
		</p>

		@if ($props.error) {
			<p class="error">{$props.error}</p>
		}
		@if ($props.warning) {
			<p class="warning">{$props.warning}</p>
		}

		@for (let bound of $props.data.boundaries) {
			@//  style="padding-left: {bound.depth * 4}px"
			<section>
				<div class="indent">
				@for (let i = 0; i < bound.depth; i++) {
					<span>â€¢</span>
				}
				</div>
				<div>
				<button
					class={["plain", bound.type, bound.recent ? "recent" : null]}
					onclick={() => bound.onexpand(bound.id)}
					onmouseenter={() => bound.onmark(bound.id)}
					onmouseleave={bound.onunmark}
				>
					{bound.type.toUpperCase()}: {bound.name}
				</button>
				@if (bound.expanded) {
					<p>{bound.details}</p>
				}
				</div>
			</section>
		}
	}

	@style {
		section {
			display: flex;
			gap: 6px;
			border-bottom: 1px solid gainsboro;
			padding: 0;
		}

		.indent {
			display: flex;
			gap: 4px;
			color: gainsboro;
			padding: 4px 0;
		}

		.indent > div {
			background-color: gainsboro;
			width: 2px;
			display: inline-block;
		}

		.plain {
			background: none;
			border: none;
			min-width: auto;
			margin: 0;
			padding: 6px 0;
			cursor: pointer;
			transition: color 1s;
		}

		.recent {
			transition: none;
		}

		.watch.recent {
			color: cornflowerblue;
		}

		.run.recent {
			color: fuchsia;
		}

		.region.recent {
			color: limegreen;
		}

		p {
			margin: 0;
			padding: 6px 0;
		}

		.error {
			color: red;
		}

		.warning {
			color: orange;
		}
	}
}
